{% extends 'Agent/layout/header.html' %}
{% load static %}
{% block content %}
{% load datetime_format %}

{% if user %}
  {% include 'cotrav_alert_message.html' %}
{% for visa in visas %}


<!-- The Modal -->

<div class="modal fade" role="dialog" id="modalAddFrroStatus">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Enter Booking Current Status</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form  action="/agents/add-frro-booking-status" method="post" enctype="multipart/form-data">

          <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="booking_id" value="{{ visa.id }}">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">



          <tr>
            <th > Select Status</th>
            <td>
             <select name="current_status_id" id="status_id" data-rel="chosen" class="form-control js-basic-single" style="width:100%" required>
                    <option value="">  Select Status </option>

                 {% for st in status %}
                    <option value="{{st.id}}">  {{st.status}} </option>
                 {% endfor %}

                </select>
            </td>
          </tr>

          <tr>
            <th >Comment for TaxiVaxi</th>
            <td>
            <textarea class="form-control" name="booking_status_taxivaxi" id="booking_status" placeholder="Enter Comment" required> </textarea>
            </td>
          </tr>

          <tr>
            <th>Comment for Client</th>
            <td>
            <textarea class="form-control" name="booking_status" placeholder="Enter Comment" required> </textarea>
            </td>
          </tr>

          <tr id="application_id_row" style="display: none;">
            <th>Application ID</th>
            <td>
            <textarea class="form-control" name="frro_application_id" id="frro_application_id" placeholder="Enter Application ID" required> </textarea>
            </td>
          </tr>

          <tr>
            <th id="frro_lbl"> Upload Supporting Document (if any)</th>
            <td>
                <input type="file" class="form-control" name="booking_email">
            </td>
          </tr>


        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Submit</button>
      </div>
    </form>


    </div>
  </div>
</div>




    <!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">following documents are Requested</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <ol class="details_log"></ol>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok</button>

      </div>
    </div>
  </div>
</div>

<div class="modal fade" role="dialog" id="modalAddHotelStatus">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Change Document Form </h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form action="/agents/frro-change-document" method="post" enctype="multipart/form-data">

        <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="document_id" id="status_booking_id">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">

        <tr>
            <th> Select Document </th>
            <td>
                <input type="file" name="booking_email">
            </td>
          </tr>

        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Update Document</button>
      </div>
    </form>


    </div>
  </div>
</div>


    <div class="modal fade" role="dialog" id="modalAddHotelStatus_office">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Change Document Form </h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form action="/agents/change-frro-booking-office-status" method="post" enctype="multipart/form-data">

        <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="booking_id" value="{{visa.id}}">
        <input class="form-control" type="hidden" name="office_status_id" id="office_status_id">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">

            <tr>
            <th> Enter Comment</th>
            <td>
                <input type="text" class="form-control" name="taxivaxi_comment">
            </td>
          </tr>

        <tr>
            <th> Select Document </th>
            <td>
                <input type="file" name="booking_email">
            </td>
          </tr>

        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Update Document</button>
      </div>
    </form>


    </div>
  </div>
</div>



    <div class="modal fade" role="dialog" id="modalAddHotelIssue">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Change Document Form </h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form action="/agents/change-frro-booking-issue" method="post" enctype="multipart/form-data">

        <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="booking_id" id="issue_booking_id">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">

        <tr>
            <th>Comment</th>
            <td>
            <textarea class="form-control" name="issue_comments" placeholder="Enter Status" required> </textarea>
            </td>
          </tr>

        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Update Document</button>
      </div>
    </form>


    </div>
  </div>
</div>



<div class="modal fade" role="dialog" id="modalAddFrroStatus_pending">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Are you sure want to send Email for pending documents.</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form  action="/agents/add-frro-booking-pending-document" method="post" enctype="multipart/form-data">

          <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="booking_id" id="pending_booking_id">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">


            {% for employee in visa.EmployeesDocs %}

            <tr> <td> <input type="checkbox" name="list_documents[]" value="{{employee.doc_name}}"> </td> <td>{{employee.doc_name}}</td>
                {% if employee.doc_file %}
                <td> <a href="{{employee.doc_file}}">Download</a></td>
                {% else %}
                <td style="color:red;">Document Not Uploaded</td>
                {% endif %}

            </tr>

            {% endfor %}


          <tr>
            <th>Comment</th>
            <td>
            <textarea class="form-control" name="booking_comments" placeholder="Enter Status" required> </textarea>
            </td>
          </tr>



        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Submit</button>
      </div>
    </form>


    </div>
  </div>
</div>

<div class="modal fade" role="dialog" id="exampleModal_requestlatter">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Are you sure want to send Email for Request Letter?</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form  action="/agents/add-frro-booking-request-letter" method="post" enctype="multipart/form-data">

          <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="booking_id" id="latter_booking_id">
        <input class="form-control" type="hidden" name="user_name" value="{{visa.user_name}}">
        <input class="form-control" type="hidden" name="request_type_name" value="{{visa.frro_request_type_name}}">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">

           <tr>
            <th >Upload Draft Document</th>
            <td>
                <input type="file" name="booking_email" class="form-control">
            </td>
          </tr>

          <tr>
            <th>Select Document Type</th>
            <td>
            <select name="document_name" class="form-control">
            	<option value="">--Select Document Type--</option>
            	<option value="Request Letter">Request Letter</option>
            	<option value="Undertaking">Undertaking</option>
            </select>
            <!--<textarea class="form-control" name="document_name" placeholder="Enter Document Name" required> </textarea>-->
            </td>
          </tr>



        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Submit</button>
      </div>
    </form>


    </div>
  </div>
</div>


<div class="modal fade" role="dialog" id="modalAddHotelStatus_letter">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title-status">Change Document Form </h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <form id="payment_request_form" action="/agents/change-frro-booking-document-letter" method="post" enctype="multipart/form-data">

        <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <input class="form-control" type="hidden" name="document_id" id="letter_booking_id">
        <!-- Modal body -->
        <div class="modal-body">
        <table class="table table-striped table-bordered">

        <tr>
            <th id="booking_reason_lbl"> Select Documnet </th>
            <td>
                <input type="file" name="booking_email">
            </td>
          </tr>

        </table>


        </div>
         <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Update Document</button>
      </div>
    </form>


    </div>
  </div>
</div>


<div class="modal fade model_custom_style" role="dialog" id="model_action_tracking">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title-status">Change FRRO Document</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
            <form action="/agents/frro-change-document" method="post" enctype="multipart/form-data">
                <input type="hidden" name="document_id" id="booking_id_tracking">

                <input type="hidden" name="current_url" value="{{ request.get_full_path }}">

                <div class="modal-body">
                <div class="row">
                    <label class="control-label col-sm-4">Select Documnet</label>
                    <input type="file" required name="documnet_file" class="form-control col-sm-8">
                </div>
                </div>


                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
                    <button id="delete_btn1" type="submit" class="btn btn-primary">Update</button>
                </div>
            </form>
            </div>

        </div>
    </div>
</div>
<!--{{bookings}}-->
<div class="page-content-wrapper">
    <div class="page-content">

                 <div class="text-center">
                 <div style="font-size:14px; font-weight:bold;">
                     Frro Request Details
                     </div>
            </div>


         <input type="hidden" name="tab_status" id="tab_status" value="{{visa.tab_status}}">

        {% if visa.tab_status == 'cancelled'%}

            <div class="row">
                 <div class="col-md-2 col-md-offset-5 booking-detail-row" style="background-color: red; color: #ffffff; margin-top: 5px; margin-bottom: 5px; text-align: center;"><i class="fa fa-times" style="font-size: 16px; top: 4px; " aria-hidden="true"></i> <h4 style="border-bottom: none; color: #fff; font-size: 12px;">Cancelled Request</h4></div>
			</div>
          {% else %}
            <br/>
            <div style="top:4px;" class="progress-bar-wrapper"></div>
            <br/>
          {% endif %}





        <div class="row">

            <div class="col-md-3">

				 <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>Request Details</header>
                    </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
								<input type="hidden" name="spoc_id" id="spoc_id" value="{{visa.spoc_id}}">
                                <tr>
							<th>Booking ID</th>
							<td>{{ visa.reference_no }}</td>
						</tr>
                                                <tr>
                        <th>FRO Application ID</th>
                        <td>{{ visa.frro_application_id|default:'NA' }}</td>
                    </tr>
						<tr>
	                        <th>Booking Date</th>
	                        <td>{{ visa.booking_datetime|datetime_format }}</td>
	                    </tr>
	                    <tr>
	                        <th>Resident City</th>
	                        <td>{{ visa.hotel_city_name }}</td>
	                    </tr>
                    	<tr>
	                        <th>Request Type</th>
	                        <td>{{ visa.frro_request_type_name }}</td>
	                    </tr>
	                    <tr>
	                        <th>Company Status</th>
	                        <td>{{ visa.client_status }}</td>
	                    </tr>

	                    <tr>
	                        <th>CoTrav Status</th>
	                        <td>{{ visa.cotrav_status }}</td>
	                    </tr>

	                    <tr>
	                        <th>FRRO Status</th>
	                        <td>{{ visa.request_status }}
                            <a href="" class="fa-trash" data-toggle="modal" data-target="#modalAddFrroStatus" data-status_booking_id="<?php echo $l1 ; ?>" data-request_type="<?php echo $l2 ; ?>">
                                    <button class="btn btn-primary btn-xs">Change Status</button>
                                    </a>
                            </td>
	                    </tr>

	                    <tr>
	                        <th>Accepted By</th>
	                        <td>{{ visa.last_action_by }}</td>
	                    </tr>



	                    <tr>
	                        <th>Assessment Code / Project Code</th>
	                        <td>{{ visa.assessment_code }}</td>
	                    </tr>
	                    <tr>
	                        <th>Reason for Booking</th>
	                        <td>{{ visa.reason_of_booking }}</td>
	                    </tr>
                            <tr>
	                        <th>Registered Email</th>
	                        <td>{{ visa.registered_email }}</td>
	                    </tr>
                            <tr>
	                        <th>Registered Username</th>
	                        <td>{{ visa.registered_username }}</td>
	                    </tr>
                            <tr>
	                        <th>Registered Password</th>
	                        <td>{{ visa.registered_password }}</td>
	                    </tr>

                            <tr>
                        <th>Certificate</th>
                        <td>{% if visa.frro_certificate %}<a href="{{visa.frro_certificate}}">Download</a>{% else %}<label style="color:red;">NA</label>{% endif %}</td>
                    </tr>



							 </table>
                    </div>
                </div>
            </div>



                 <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>Log History </header>
                    </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">

	                            {% for log in visa.ActionLogs %}
                                <tr>
                                      <td>
	                                    <b>{{log.employee_name}}</b>&nbsp;[{{log.action_date}}]
                                        &nbsp;{{log.action}}
                                          {% if log.action == 'Request Pending Documents' %}
                                              {% for log_p in visa.PendingDocumentActionLogs %}
                                                    <a class="btn btn-primary btn-xs" data-toggle="modal" data-document="{{log_p.request_document}}" data-target="#exampleModalCenter">Show</a>
                                              {% endfor %}
                                          {% endif %}
                                        <br/>
                                      </td>
                                    </tr>
	                            {% endfor %}

							 </table>
                        </div>

                    </div>
                    </div>





			</div>

            <div class="col-md-3">
            <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>SPOC Details</header>
                    </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
								 <tr>
                                    <td>SPOC Name</td>
                                    <td>{{ visa.user_name }}</td>
                                </tr>

								 <tr>
                                    <td>Contact</td>
                                    <td>{{ visa.user_contact }}</td>
                                </tr>
								 <tr>
                                    <td>Email Id</td>
                                    <td>{{ visa.spoc_email }}</td>
                                </tr>

							 </table>
                        </div>

                    </div>
                    </div>



                <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>Request Letter Details</header>
                        <a href="" data-toggle="modal" data-target="#exampleModal_requestlatter" data-office_booking_id="{{ visa.id }}">
                            <button class="btn btn-primary btn-xs">Add Request</button> </a>
                    </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">

                                <tr>
                                                <th style="width: 10%;">Sr. No.</th>
                                                <th style="width: 20%;">Letter Name</th>
                                                <th style="width: 20%;">Draft Letter</th>
                                                <th style="width: 40%;">Signed Letter</th>
                                                <th style="width: 10%;">Action</th>
                                            </tr>



	                            {% for log in visa.RequestLetters %}
                                 <tr>
                                    <td style="width: 10%;">{{ forloop.counter }}</td>
                                    <td style="width: 30%;">{% if log.document_name %}{{log.document_name}}{% else %}NA{% endif %}</td>
                                    <td style="width: 20%;">{% if log.document_path %}<a href="{{log.document_path}}">Download</a>{% else %}<label style="color:red;">Not Upload</label>{% endif %}</td>
                                    <td style="width: 20%;">{% if log.upload_document %}<a href="{{log.upload_document}}">Download</a>{% else %}<label style="color:red;">Not Upload</label>{% endif %}</td>
                                    <td style="width: 20%;"><a href="" data-toggle="modal" data-target="#modalAddHotelStatus_letter" data-status_booking_id="{{log.id}}">
                                        <button class="btn btn-primary btn-xs">Change</button> </a></td>
                                     </tr>
	                            {% endfor %}




							 </table>
                        </div>

                    </div>
                    </div>








            </div>


            <div class="col-md-6">



                <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>Employee Details</header>
                    </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">

                                <tr>
                                    <th>Employee ID</th>
									<th>  Name  </th>
									<th>  Email Id </th>
									<th>  Contact  </th>
									<th>  Age   </th>
									<th>  Gender </th>

							</tr>

							{% for passanger in visa.Passangers %}
								<tr>
                                    <td><a target="_blank" href="/agents/view-employee-frro-details/{{ passanger.id|default:'' }}">{{ passanger.core_employee_id|default:'NA' }}</a></td>
                                <td>{{ passanger.employee_name|default:'' }}</td>
								<td>{{ passanger.employee_email|default:''}}</td>
							    <td>{{ passanger.employee_contact|default:''}}</td>
								<td>{{ passanger.age|default:''}}</td>
							    <td>{{ passanger.gender|default:''}}</td>

								</tr>
							{% endfor %}


							 </table>
                        </div>

                    </div>
                    </div>

                <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>Employee Document Details</header>
                        <a href="" class="fa-trash" data-toggle="modal" data-target="#modalAddFrroStatus_pending" data-status_booking_id="{{visa.id}}" data-request_type="{{visa.request_type}}">
        <button class="btn btn-primary btn-xs">Request Email For Pending Documents</button>
        </a>
                    </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">

                                {% for employee in visa.EmployeesDocs %}

								<tr>
                                    <td>{{employee.doc_name}}</td>
                                    <td>{% if employee.doc_file %}<a target="_blank" href="{{employee.doc_file}}" >Download</a>{% else %}<label style="color:red;">Document Not Upload</label>{% endif %}</td>
                                    <td>
                                        <a title="Add/Change Document" style="background:cadetblue; color:white;" data-target="#model_action_tracking" data-id="{{employee.id}}"
                                                       data-toggle="modal" class="btn btn-primary btn-xs"> Change </a></td>
                                    <td><a href="" data-toggle="modal" data-target="#modalAddHotelIssue" data-issue_booking_id="{{visa.id}}" data-issue_doc_name="{{employee.id}}"> <button class="btn btn-primary btn-xs">Issue</button> </a></td>

                                </tr>


                                {% endfor %}


							 </table>
                        </div>

                    </div>
                    </div>


                   <div class="card">
                    <div class="card-head card-topline-aqua">
                        <header>FRRO Office Status Details </header>

                         </div>
                    <div class="card-body no-padding height-9">

                        <div class="form-group row">
							<table class="table table-striped table-bordered bootstrap-datatable datatable responsive">

                                <tr>
                                               <th style="width: 10%;">Sr. No.</th>
                                                <th style="width: 10%;">Type</th>
                                                <th style="width: 10%;">Status</th>
                                                <th style="width: 20%;">Spoc Comment</th>
                                                <th style="width: 20%;">CoTrav Comment</th>
                                                <th style="width: 10%;">Client Doc</th>
                                                <th style="width: 10%;">CoTrav Doc</th>
                                                <th style="width: 10%;">Reply</th>
                                </tr>



	                            {% for log in visa.OfficeStatus %}
                                <tr>
                                    <td style="width: 10%;">{{ forloop.counter }}</td>
                                    <td style="width: 10%;">{{log.office_status_type}}</td>
                                    <td style="width: 10%;">{{log.office_status}}</td>
                                    <td style="width: 20%;">{{log.spoc_comment}}</td>
                                    <td style="width: 20%;">{{log.taxivaxi_comment}}</td>
                                    <td style="width: 10%;">{% if log.spoc_doc %}<a href="{{log.spoc_doc}}">Download</a>{% else %}<label style="color:red;">Not Upload</label>{% endif %}</td>
                                    <td style="width: 10%;">{% if log.taxivaxi_doc %}<a href="{{log.taxivaxi_doc}}">Download</a>{% else %}<label style="color:red;">Not Upload</label>{% endif %}</td>
                                    <td><a href="" data-toggle="modal" data-target="#modalAddHotelStatus_office" data-status_booking_id="{{visa.id}}" data-office_status_id="{{log.id}}"> <button class="btn btn-primary btn-xs">Reply</button> </a></td>
                                </tr>
	                            {% endfor %}




							 </table>
                        </div>

                    </div>
                    </div>

            </div>





    </div>
 {% endfor %}


</div>
</div>
<!-- end page content -->


{% else %}
<p>Welcome, new user. Please log in.<a href="/login">Login</a></p>
{% endif %}
    <script type="text/javascript">
$(function() {

  $('#model_action_tracking').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget); // Button that triggered the modal
    var id = button.data('id'); // Extract info from data-* attributes
    var modal = $(this);
    modal.find('#booking_id_tracking').val(id);

    });

var spoc_id = $('#spoc_id').val();

      $('#employee_id_1_f').empty();
      $('#employee_id_1').empty();
      $('#employee_id_2').empty();
      $('#employee_id_3').empty();
      $('#employee_id_4').empty();
      $('#employee_id_5').empty();
      $('#employee_id_6').empty();
    $.ajaxSetup({
            headers:{
                'Authorization': "Token {{request.session.agent_access_token}}",
                'usertype': 10
            }

        });

        //       For Employees

    var_url_spoc_employee = '/api/'+'spoc_employee'
     $.post(var_url_spoc_employee,{ spoc_id: spoc_id },
      function(data)
      {

       if(data['Employees'].length != 0){
        employee = data['Employees'];
        $('#employee_id_1_f').append($("<option value=''>Select Employee</option>"));
        $('#employee_id_1').append($("<option value=''>Select Employee</option>"));
        $('#employee_id_2').append($("<option value=''>Select Employee</option>"));
        $('#employee_id_3').append($("<option value=''>Select Employee</option>"));
        $('#employee_id_4').append($("<option value=''>Select Employee</option>"));
        $('#employee_id_5').append($("<option value=''>Select Employee</option>"));
        $('#employee_id_6').append($("<option value=''>Select Employee</option>"));
         for (var i=0;i<employee.length;i++) {

            $('#employee_id_1_f').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));
            $('#employee_id_1').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));
            $('#employee_id_2').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));
            $('#employee_id_3').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));
            $('#employee_id_4').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));
            $('#employee_id_5').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));
            $('#employee_id_6').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"/"+employee[i].employee_cid+"</option>"));

         }
       var emp_len = data['Employees'].length;
       for (var i=emp_len+1;i<7;i++) {
       var valueToCompare = $("#no_of_seats option[value='"+i+"']").text();
            if(valueToCompare == i) {
                $("#no_of_seats option[value='"+i+"']").attr("disabled", "disabled");
            }
       }

       }else{
        alert('No Employees Available')
       }
       });

});



</script>

{% if visa.tab_status == 'cancelled'%}
{% else %}
<script src="{% static 'assets/js/progress-bar.js' %}"></script>
{% endif %}
<script >
//we can set animation delay as following in ms (default 1000)
ProgressBar.singleStepAnimation = 1500;
val = $('#tab_status').val();
val = val.charAt(0).toUpperCase() + val.substr(1);

ProgressBar.init(
  [
        'Unapproved',
        'Approved',
        'Acknowledged',
        'Application Submitted',
        'Under-process',
        'Completed',

  ],
  val,
  'progress-bar-wrapper' // created this optional parameter for container name (otherwise default container created)
);




</script>
<script type="text/javascript">
$(function() {
$('#modalAddHotelStatus').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var status_booking_id = button.data('status_booking_id'); // Extract info from data-* attributes

var modal = $(this);
modal.find('#status_booking_id').val(status_booking_id);

});

$('#modalAddHotelStatus_office').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var status_booking_id = button.data('status_booking_id'); // Extract info from data-* attributes
var office_status_id = button.data('office_status_id');
var modal = $(this);
modal.find('#status_booking_id').val(status_booking_id);
modal.find('#office_status_id').val(office_status_id);

});

$('#modalAddHotelStatus_letter').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var status_booking_id = button.data('status_booking_id'); // Extract info from data-* attributes

var modal = $(this);
modal.find('#letter_booking_id').val(status_booking_id);

});

$('#modalAddHotelIssue').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var issue_booking_id = button.data('issue_booking_id'); // Extract info from data-* attributes
var issue_doc_name = button.data('issue_doc_name');
var modal = $(this);
modal.find('#issue_booking_id').val(issue_booking_id);
modal.find('#issue_doc_name').val(issue_doc_name);

});

$('#modalAddFrroStatus_pending').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var status_booking_id = button.data('status_booking_id'); // Extract info from data-* attributes
var modal = $(this);
modal.find('#pending_booking_id').val(status_booking_id);

});


 $('#exampleModal_requestlatter').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var latter_booking_id = button.data('office_booking_id'); // Extract info from data-* attributes
var modal = $(this);
modal.find('#latter_booking_id').val(latter_booking_id);

});

 $('#exampleModalCenter').on('show.bs.modal', function (event) {

var button = $(event.relatedTarget); // Button that triggered the modal
var document = button.data('document'); // Extract info from data-* attributes

var modal = $(this);
var array = document.split('###');
var html_babab = '';
modal.find('.details_log > li').remove();;
for (a in array ) {
    html_babab += '<li><span>'+array[a]+'</span></li>';
}

modal.find('.details_log').append(html_babab);

});


$('#status_id').on('change', function (e) {
    var valueSelected = this.value;
    if(valueSelected == '5'){
        $('#application_id_row').show();
    }else{
        $('#application_id_row').hide();
    }

    if(valueSelected == '15'){
        $('#frro_lbl').text("Upload FRRO Certificate");
    }else{
        $('#frro_lbl').text("Upload Supporting Document (if any)");
    }
});

       });
</script>
{% endblock %}