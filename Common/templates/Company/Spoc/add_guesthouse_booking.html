{% extends 'Company/Spoc/layout/header.html' %}

{% block content %}

{% if user %}
			<!-- start page content -->
{% include 'cotrav_alert_message.html' %}


                <div class="page-content">

                                      <div class="text-center">
                     <div style="font-size:14px; font-weight:bold;">
                        Add House Booking
                         </div>
                </div>
<form method="POST" action="/Corporate/Spoc/add-guesthouse-booking/{{user.id}}" enctype="multipart/form-data">
      {% csrf_token %}

      <input type="hidden" name="user_id" value="{{user.id}}">
      <input type="hidden" name="corporate_id" value="{{user.corporate_id}}">
      <input type="hidden" name="spoc_id" value="{{user.id}}">

      <input type="hidden" name="no_of_nights" id="no_of_nights" value="{{no_of_nights}}">
      <input type="hidden" name="room_id" id="room_id" value="{{rid}}">
      <input type="hidden" name="guesthouse_id" id="guesthouse_id" value="{{gid}}">
      <input type="hidden" name="city_id" id="city_id" value="{{from_city}}">
      <input type="hidden" name="current_url" value="{{ request.get_full_path }}">


                    <div class="row">
                        <div class="col-md-4 col-sm-4">
                            <div class="card card-topline-aqua">
                                <div class="card-head">
                                    <header>Guest House Details</header>
                                    <div class="tools">
                                        <a class="fa fa-repeat btn-color box-refresh" href="javascript:;"></a>
                                        <a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>
                                        <a class="t-close btn-color fa fa-times" href="javascript:;"></a>
                                    </div>
                                </div>
                                <div class="card-body " id="bar-parent">

                                    {% for house in guesthouses %}
                                    <table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
                                      <tr>
                                        <th>GuestHouse ID</th>
                                        <td>{{ house.guest_house_id }}</td>
                                        </tr>
                                        <tr>
                                            <th>GuestHouse Code</th>
                                            <td>{{ house.guest_house_code }}</td>
                                        </tr>
                                        <tr>
                                            <th>Name</th>
                                            <td>{{ house.guest_house_name }}</td>
                                        </tr>
                                        <tr>
                                            <th>City Name</th>
                                            <td>{{ house.city_id_name }}</td>
                                        </tr>

                                        <tr>
                                            <th>Location</th>
                                            <td>{{ house.area_location }}</td>
                                        </tr>


                                    </table>
                                {% endfor %}

                                </div>
                            </div>
                        </div>


                        <div class="col-md-8">
                            <div class="card card-topline-aqua">
                                <div class="card-head">
                                    <header>Guest House Amenities Details</header>
                                    <div class="tools">
                                        <a class="fa fa-repeat btn-color box-refresh" href="javascript:;"></a>
                                        <a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>
                                        <a class="t-close btn-color fa fa-times" href="javascript:;"></a>
                                    </div>
                                </div>
                                <div class="card-body " id="bar-parent">

                                    {% for house in guesthouses %}
                                    <table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
                                      <tr>
                                        <th>Bed Type</th>
                                        <td>{{ house.bed_type|yesno:'Yes,No' }}</td>
                                        <th>Is TV</th>
                                        <td>{{ house.tv|yesno:'Yes,No' }}</td>
                                          <th>WiFi</th>
                                            <td>{{ house.wifi|yesno:'Yes,No' }}</td>
                                        </tr>
                                        <tr>
                                            <th>Queen Size Bed</th>
                                            <td>{{ house.queen_size_bed|yesno:'Yes,No' }}</td>
                                            <th>AC</th>
                                            <td>{{ house.ac|yesno:'Yes,No' }}</td>
                                            <th>Functional Living Area</th>
                                            <td>{{ house.functional_living_area|yesno:'Yes,No' }}</td>
                                        </tr>

                                        <tr>
                                            <th>Power Backup</th>
                                            <td>{{ house.power_backup|yesno:'Yes,No' }}</td>
                                            <th>Geyser</th>
                                            <td>{{ house.geyser|yesno:'Yes,No' }}</td>
                                            <th>Elevator</th>
                                            <td>{{ house.elevator|yesno:'Yes,No' }}</td>
                                        </tr>

                                        <tr>
                                            <th>CCTV Cameras</th>
                                            <td>{{ house.cctv_cameras|yesno:'Yes,No' }}</td>
                                            <th>Security</th>
                                            <td>{{ house.security|yesno:'Yes,No' }}</td>
                                            <th>Fire Extinguisher</th>
                                            <td>{{ house.fire_extinguisher|yesno:'Yes,No' }}</td>
                                        </tr>

                                        <tr>
                                            <th>Room Facilities</th>
                                            <td>{{ house.room_facilities|yesno:'Yes,No' }}</td>
                                            <th>Intercom</th>
                                            <td>{{ house.intercom|yesno:'Yes,No' }}</td>
                                            <th>FAN</th>
                                            <td>{{ house.fan|yesno:'Yes,No' }}</td>
                                        </tr>

                                        <tr>
                                            <th>Telephone</th>
                                            <td>{{ house.telephone|yesno:'Yes,No' }}</td>

                                        </tr>



                                    </table>
                                {% endfor %}

                                </div>
                            </div>
                        </div>




<div class="col-md-4 col-sm-4">
                            <div class="card card-topline-aqua">
                                <div class="card-head">
                                    <header>Booking Details</header>
                                    <div class="tools">
                                        <a class="fa fa-repeat btn-color box-refresh" href="javascript:;"></a>
                                        <a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>
                                        <a class="t-close btn-color fa fa-times" href="javascript:;"></a>
                                    </div>
                                </div>
                                <div class="card-body " id="bar-parent">



    <div class="form-group row">
            <label class="col-sm-4">Check In DateTime</label>
            <input readonly type="text" class="col-sm-8 form-control datetimepicker1"  autocomplete="off" name="checkin_datetime" id="check_in_date" value="{{check_in}}">
    </div>

    <div class="form-group row">
            <label class="col-sm-4">Check Out DateTime</label>
            <input readonly type="text" class="col-sm-8 form-control datetimepicker2" autocomplete="off" name="checkout_datetime" id="check_out_date" value="{{check_out}}">
    </div>


                                    {% for corp_acces in corp_access %}
                                {% if corp_acces.has_assessment_codes == 1 %}

                                        <div class="form-group row">
                                            <label class="col-sm-4">Assessment Code</label>
                                            <select class="col-sm-8 form-control  myselect" style="width:66%"  name="assessment_code" id="assessment_code">
                                                <option value="">Select Assessment Code</option>
                                                {% for assessment in assessments %}
                                                <option value="{{assessment.id}}">{{assessment.assessment_code}}</option>
                                                {% endfor %}
                                                </select>

                                        </div>



                                        <div class="form-group row">
                                                <label class="col-sm-4">Assessment City</label>
                                                <select class="col-sm-8 form-control  myselect" style="width:66%"  name="assessment_city" id="assessment_cities">
                                                    <option value="">Select Assessment City</option>
                                                    {% for city in cities_ass %}
                                                        <option value="{{city.id}}">{{city.city_name}}</option>
                                                        {% endfor %}
                                                </select>

                                        </div>

                                     {% endif %}
                              {% endfor %}

    <div class="form-group row">
            <label class="col-sm-4">Billing Entity</label>
            <select class="col-sm-8 form-control  myselect" style="width:66%"  name="billing_entity" id="entity_id"  required>
                <option value="">Select Billing Entity</option>
                {% for entity in entities %}
                    <option value="{{entity.id}}">{{entity.entity_name}}</option>
                {% endfor %}
            </select>

    </div>

                                    <div class="form-group row">
                                            <label class="col-sm-4">Reason for Booking</label>
                                            <input type="text" class="col-sm-8 form-control" name="reason_for_booking" placeholder="Reason for Booking">
                                        </div>


                                     <div class="form-group">
                                               <div class="offset-md-3 col-md-9">
                                                   <input type="submit" value="Submit" class="btn btn-info">
                        <a href="{{request.META.HTTP_REFERER}}" class="btn btn-default">  Cancel  </a>
                                               </div>
                                           </div>

                                </div>
                            </div>
                        </div>


    <div class="col-md-8">
                               <div class="card card-topline-aqua">
                                <div class="card-head">
                                                   <header>Passenger Details</header>
                                                   <div class="tools">
                                                       <a class="fa fa-repeat btn-color box-refresh" href="javascript:;"></a>
                                                       <a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>
                                                       <a class="t-close btn-color fa fa-times" href="javascript:;"></a>
                                                   </div>
                                               </div>
                                               <div class="card-body ">

                                                          <div class="form-group row">
                                <label class="col-sm-2" >Number Of Employees*</label>
                                <select id="no_of_seats" name="no_of_seats" class="form-control col-sm-8 no_of_seats  myselect" style="width:66%" >
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5" style="display: none">5</option>
                                    <option value="6" style="display: none">6</option>
                                </select>
                            </div>

                               <div class="form-group row" id="emp_row_1">
                                    <label class="col-sm-2" >Employee 1</label>
                                     <select id="employee_id_1" name="employee_id_1" class="form-control col-sm-2  myselect" style="width:13%"  required>
                                         <option value="">Select Employee</option>
                                        {% for employee in employees %}
                                        <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                        {% endfor %}
                                    </select>
                                    <input type="text" name="emp_id_1" id="emp_id_1" class="form-control col-sm-2" placeholder="Employee Id">
                                   <input type="text" name="employee_name_1" id="employee_name_1" class="form-control col-sm-2" placeholder="Name">
                                    <input type="text" name="employee_contact_1" id="employee_contact_1" class="form-control col-sm-2" placeholder="Contact No">
                                    <input type="text" name="employee_email_1" id="employee_email_1" class="form-control col-sm-2" placeholder="Email">
                                </div>

                              <div class="form-group row" id="emp_row_2" >
                                    <label class="col-sm-2" >Employee 2</label>
                                     <select name="employee_id_2" id="employee_id_2" class="form-control col-sm-2  myselect" style="width:13%" >
                                         <option value="">Select Employee</option>
                                        {% for employee in employees %}
                                        <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                        {% endfor %}
                                    </select>
                                  <input type="text" name="emp_id_2" id="emp_id_2" class="form-control col-sm-2" placeholder="Employee Id">
                                   <input type="text" name="employee_name_2" id="employee_name_2" class="form-control col-sm-2" placeholder="Name">
                                    <input type="text" name="employee_contact_2" id="employee_contact_2" class="form-control col-sm-2" placeholder="Contact No">
                                    <input type="text" name="employee_email_2" id="employee_email_2" class="form-control col-sm-2" placeholder="Email">
                                </div>

                              <div class="form-group row"  id="emp_row_3" >
                                    <label class="col-sm-2" >Employee 3</label>
                                     <select name="employee_id_3" id="employee_id_3" class="form-control col-sm-2  myselect" style="width:13%" >
                                         <option value="">Select Employee</option>
                                        {% for employee in employees %}
                                        <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                        {% endfor %}
                                    </select>
                                  <input type="text" name="emp_id_3" id="emp_id_3" class="form-control col-sm-2" placeholder="Employee Id">
                                   <input type="text" name="employee_name_3" id="employee_name_3" class="form-control col-sm-2" placeholder="Name">
                                    <input type="text" name="employee_contact_3" id="employee_contact_3" class="form-control col-sm-2" placeholder="Contact No">
                                    <input type="text" name="employee_email_3" id="employee_email_3" class="form-control col-sm-2" placeholder="Email">
                                </div>

                              <div class="form-group row"  id="emp_row_4">
                                    <label class="col-sm-2" >Employee 4</label>
                                     <select name="employee_id_4" id="employee_id_4" class="form-control col-sm-2  myselect" style="width:13%" >
                                         <option value="">Select Employee</option>
                                        {% for employee in employees %}
                                        <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                        {% endfor %}
                                    </select>
                                   <input type="text" name="emp_id_4" id="emp_id_4" class="form-control col-sm-2" placeholder="Employee Id">
                                   <input type="text" name="employee_name_4" id="employee_name_4" class="form-control col-sm-2" placeholder="Name">
                                    <input type="text" name="employee_contact_4" id="employee_contact_4" class="form-control col-sm-2" placeholder="Contact No">
                                    <input type="text" name="employee_email_4" id="employee_email_4" class="form-control col-sm-2" placeholder="Email">
                                </div>

                               <div class="form-group row"  id="emp_row_5">
                                    <label class="col-sm-2" >Employee 5</label>
                                     <select name="employee_id_5" id="employee_id_5" class="form-control col-sm-2  myselect" style="width:13%" >
                                         <option value="">Select Employee</option>
                                        {% for employee in employees %}
                                        <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                        {% endfor %}
                                    </select>
                                   <input type="text" name="emp_id_5" id="emp_id_5" class="form-control col-sm-2" placeholder="Employee Id">
                                   <input type="text" name="employee_name_5" id="employee_name_5" class="form-control col-sm-2" placeholder="Name">
                                    <input type="text" name="employee_contact_5" id="employee_contact_5" class="form-control col-sm-2" placeholder="Contact No">
                                    <input type="text" name="employee_email_5" id="employee_email_5" class="form-control col-sm-2" placeholder="Email">
                                </div>

                               <div class="form-group row"  id="emp_row_6">
                                    <label class="col-sm-2" >Employee 6</label>
                                     <select name="employee_id_6" id="employee_id_6" class="form-control col-sm-2  myselect" style="width:13%" >
                                         <option value="">Select Employee</option>
                                        {% for employee in employees %}
                                        <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                        {% endfor %}
                                    </select>
                                    <input type="text" name="emp_id_6" id="emp_id_6" class="form-control col-sm-2" placeholder="Employee Id">
                                   <input type="text" name="employee_name_6" id="employee_name_6" class="form-control col-sm-2" placeholder="Name">
                                    <input type="text" name="employee_contact_6" id="employee_contact_6" class="form-control col-sm-2" placeholder="Contact No">
                                    <input type="text" name="employee_email_6" id="employee_email_6" class="form-control col-sm-2" placeholder="Email">
                                </div>

                                                     </div>


                                           </div>
                                           </div>



                        </div>

            </form>
    </div>
    </div>



<!-- end page content -->




{% else %}
    <p>Welcome, new user. Please log in.<a href="/login">Login</a> </p>
{% endif %}

<script>

$( document ).ready(function() {
    $('#emp_row_2').hide();
    $('#emp_row_3').hide();
    $('#emp_row_4').hide();
    $('#emp_row_5').hide();
    $('#emp_row_6').hide();

    var emp_len = $('#employee_id_1 > option').length;
       for (var i=emp_len;i<7;i++) {
       var valueToCompare = $("#no_of_seats option[value='"+i+"']").text();
            if(valueToCompare == i) {
                $("#no_of_seats option[value='"+i+"']").attr("disabled", "disabled");
            }
       }

});

$("#employee_id_1").change(function()
    {
    	$("#emp_id_1").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_1").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_1").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_1").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_2").change(function()
    {
    	$("#emp_id_2").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_2").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_2").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_2").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_3").change(function()
    {
    	$("#emp_id_3").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_3").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_3").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_3").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_4").change(function()
    {
    	$("#emp_id_4").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_4").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_4").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_4").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_5").change(function()
    {
    	$("#emp_id_5").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_5").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_5").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_5").val($(this).find("option:selected").attr("emp_email"));
    });

    $("#employee_id_6").change(function()
    {
    	$("#emp_id_6").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_6").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_6").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_6").val($(this).find("option:selected").attr("emp_email"));
    });

$(".no_of_seats").change(function()
    {

    	var no_of_seats = $(this).val();

    	if(no_of_seats > 0){
           for(i=1;i<=no_of_seats;i++)
            {
                $('#emp_row_'+i).show();
                $("#employee_id_"+i).attr('required',true);

            }
            var j = parseInt(no_of_seats) + 1;
			for(j=j; j<=6; j++)
			{
				$('#emp_row_'+j).hide();
				$("#employee_id_"+j).attr('required',false);

			}
    	}
    });




</script>

{% endblock %}